<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCRUM Mastery - Guía Completa para Equipos Ágiles</title>
    
    <!-- External CSS Files -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="assets/css/animations.css"> 
    <!-- Favicon and Meta -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <meta name="description" content="Guía completa de SCRUM con enfoque en estimación Fibonacci para equipos .NET y Angular">
    <meta name="keywords" content="SCRUM, Agile, Fibonacci, Story Points, .NET, Angular, Estimación">
    <meta name="author" content="SCRUM Pro Guide">
    
    <!-- Progressive Web App -->
    <meta name="theme-color" content="#6366F1">
    <link rel="manifest" href="manifest.json">
    
    <!-- Open Graph -->
    <meta property="og:title" content="SCRUM Pro Guide - Estimación Fibonacci">
    <meta property="og:description" content="Guía completa de SCRUM con enfoque en estimación Fibonacci">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tu-usuario.github.io/scrum-guide/">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="assets/js/content-loader.js" as="script">
    <link rel="preload" href="sections/scrum-foundations.html" as="fetch" crossorigin>
    <link rel="preload" href="sections/estimacion-agil.html" as="fetch" crossorigin>
</head>
<body>
    <!-- Loader Completo -->
    <div class="loader" id="loader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <p style="margin-top: 1rem; color: var(--gray);">Cargando experiencia Scrum...</p>
            <div style="margin-top: 1rem; color: var(--primary); font-size: 0.9rem;" id="loading-status">
                Inicializando contenido modular...
            </div>
            <div class="loader-progress" style="margin-top: 1.5rem;">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>
        
        <!-- Loading Tips -->
        <div class="loader-tips" id="loader-tips">
            <div class="tip active">
                <span class="tip-icon">💡</span>
                <span class="tip-text">SCRUM utiliza la escala Fibonacci para estimación porque refleja la incertidumbre natural</span>
            </div>
            <div class="tip">
                <span class="tip-icon">📊</span>
                <span class="tip-text">Un equipo ágil típico mejora su velocity en un 23% después de 3 sprints</span>
            </div>
            <div class="tip">
                <span class="tip-icon">⚡</span>
                <span class="tip-text">Planning Poker ayuda a reducir el sesgo de anclaje en las estimaciones</span>
            </div>
            <div class="tip">
                <span class="tip-icon">🎯</span>
                <span class="tip-text">La Definition of Done debe ser clara y compartida por todo el equipo</span>
            </div>
        </div>
        
        <!-- Error State -->
        <div class="loader-error" id="loader-error" style="display: none;">
            <div class="error-icon">⚠️</div>
            <h3>Error al cargar</h3>
            <p id="error-message">No se pudo cargar la aplicación</p>
            <button id="retry-button" class="retry-btn">🔄 Reintentar</button>
        </div>
    </div>

    <!-- Navigation Component Container -->
    <div id="navigation-container"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <h1 class="hero-title">SCRUM</h1>
            <p class="hero-subtitle">Framework ágil para equipos de alto rendimiento</p>
            <a href="#scrum-foundations" class="hero-cta">
                Comenzar el viaje
                <span>→</span>
            </a>
            <div style="margin-top: 2rem; font-size: 0.9rem; color: var(--gray);">
                🚀 Contenido modular | 📊 Estimación Fibonacci | 💻 Ejemplos prácticos
            </div>
        </div>
        <div class="scroll-indicator">
            <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                <path d="M15 20L9 14L10.4 12.6L15 17.2L19.6 12.6L21 14L15 20Z" fill="white" opacity="0.5"/>
            </svg>
        </div>
    </section>

    <!-- Main Content Container -->
    <main id="main-content" class="main-content">
        <!-- Dynamic content will be loaded here -->
        <div class="content-placeholder" style="text-align: center; padding: 4rem 2rem; color: var(--gray);">
            <div style="font-size: 2rem; margin-bottom: 1rem;">📄</div>
            <h3>Cargando contenido...</h3>
            <p>El contenido se está cargando dinámicamente</p>
        </div>
    </main>

    <!-- Footer Component Container -->
    <div id="footer-container"></div>

    <!-- JavaScript Modules - Orden correcto -->
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/tabs.js"></script>
    <script src="assets/js/charts.js"></script>
    <script src="assets/js/animations.js"></script>
    <script src="assets/js/content-loader.js"></script>
    <script src="assets/js/navigation.js"></script>
    <script src="assets/data/sections.js"></script>

    <!-- Component & App Initialization -->
    <script>
        // Global error handler
        window.addEventListener('error', (event) => {
            console.error('Global error:', event.error);
            if (window.showError) {
                window.showError('Error en la aplicación: ' + event.error.message);
            }
        });

        // Component loader
        async function loadComponents() {
            try {
                // Load navigation
                const navResponse = await fetch('components/navigation.html');
                if (navResponse.ok) {
                    const navHtml = await navResponse.text();
                    document.getElementById('navigation-container').innerHTML = navHtml;
                }

                // Load footer
                const footerResponse = await fetch('components/footer.html');
                if (footerResponse.ok) {
                    const footerHtml = await footerResponse.text();
                    document.getElementById('footer-container').innerHTML = footerHtml;
                }
            } catch (error) {
                console.warn('Error loading components:', error);
            }
        }

        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', async () => {
            
            try {
                // Load components first
                await loadComponents();
                
                // Initialize content loader
                if (window.contentLoader) {
                    await window.contentLoader.init();
                } else {
                    console.warn('ContentLoader not available');
                }
                
                // Initialize navigation
                if (window.Navigation) {
                    window.navigation = new window.Navigation();
                }
                
                // Load initial section
                const hash = window.location.hash.replace('#', '');
                const initialSection = hash || 'scrum-foundations';
                
                if (window.contentLoader) {
                    await window.contentLoader.loadSection(initialSection);
                }
                
                // Hide loader
                setTimeout(() => {
                    const loader = document.getElementById('loader');
                    if (loader) {
                        loader.style.opacity = '0';
                        setTimeout(() => {
                            loader.style.display = 'none';
                        }, 500);
                    }
                }, 1500);
                
                
            } catch (error) {
                console.error('❌ Error initializing app:', error);
                if (window.showError) {
                    window.showError('Error al inicializar la aplicación');
                }
            }
        });

        // Handle navigation
        window.addEventListener('hashchange', async () => {
            const section = window.location.hash.replace('#', '');
            if (section && window.contentLoader) {
                await window.contentLoader.loadSection(section);
            }
        });
    </script>
</body>
</html>